---

- hosts: minions
  vars_files:
    - vars/all.yml
  tasks:
    - name: Get images
      shell: >
        docker images
      register: docker_images
    
    - name: Download images
      shell: >
        docker pull "{{ item }}"
      when: "'{{ item }}' not in '{{ docker_images.stdout }}'"
      with_items:
        - dougbtv/vnf-asterisk-controller
        - dougbtv/asterisk14
        - dougbtv/vnf-asterisk-nginx